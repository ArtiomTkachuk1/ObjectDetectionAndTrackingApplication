(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a(212)},212:function(e,t,a){"use strict";a.r(t);var n=a(20),i=a(21),r=a(23),s=a(22),l=a(24),o=a(0),c=a.n(o),m=a(7),p=a.n(m),u=a(120),h=a(273),d=a(119),_=a.n(d),g=a(118),f=a.n(g),v=a(12),y=a(252),b=a(221),E=a(262),w=a(216),x=a(215),k=a(220),O=a(260),S=a(254),j=a(109),C=a.n(j);function F(e){var t=Object(y.a)((function(t){return{container:{display:"flex",flexWrap:"wrap"},textField:{display:"flex",width:e.width,marginTop:e.marginTop,margin:"auto"},button:{display:"flex",width:e.width,marginTop:e.marginTop,margin:"auto"},FormHelperText:{display:"flex",width:e.width,margin:"auto",marginTop:7,color:"red "},input:{display:"none"},rightIcon:{marginLeft:t.spacing(1)},iconSmall:{fontSize:20}}}))(),n=c.a.useState(""),i=Object(v.a)(n,2),r=i[0],s=i[1],l=c.a.useState(""),o=Object(v.a)(l,2),m=o[0],p=o[1];return e.values.name===e.types[0]?c.a.createElement("div",null,c.a.createElement(S.a,{label:"Number of frames",id:"margin-normal",defaultValue:"",className:t.textField,onChange:function(e){p(e.target.value)},helperText:"",margin:"normal"}),c.a.createElement(S.a,{label:"ref to "+e.values.name,id:"margin-normal",defaultValue:"",className:t.textField,onChange:function(e){s(e.target.value)},helperText:"",margin:"normal"}),c.a.createElement(O.a,{variant:"outlined",color:"primary",className:t.button,onClick:function(t){t.preventDefault();var n=e.default_check();if(!0===n){var i=isNaN(parseInt(m));if(!0===i)return i=!1,void e.seterror_mesage(e.error_mesage_strings[2]);i=!0;var s=!1,l=!1;if(void 0!==C.a.parse(r)&&(s=!0),!1===s){var o=r.indexOf(".link");0===r.indexOf("http://")&&o===r.length-5&&(l=!0)}if(!1===s&&!1===l)0===r.indexOf("rtsp://")&&!0;if(!1===s&&!1===l&&!1===l){var c=r.indexOf(".mjpg");if(0!==r.indexOf("http://")||c!==r.length-5)return void e.seterror_mesage(e.error_mesage_strings[3]);!0}a(47)({method:"post",url:"",data:{ref:r,nn_type:e.nn_type,num_of_frames:m}}).then((function(t){e.set_im_src()})).catch((function(e){return console.warn(e)})),e.set_page_to_1()}else e.seterror_mesage(n)}},"Go"),c.a.createElement(w.a,{className:t.FormHelperText},e.error_mesage)):null}var T=a(111),P=a.n(T),I=a(261);function M(e){var t=Object(y.a)((function(t){return{div:{display:"flex",flexWrap:"wrap"},textField:{display:"flex",width:e.width,marginTop:e.marginTop,margin:"auto"},button:{display:"flex",width:e.width,marginTop:e.marginTop,margin:"auto"},FormHelperText:{display:"flex",width:e.width,margin:"auto",marginTop:7,color:"red "},input:{display:"none"},rightIcon:{marginLeft:t.spacing(1)},iconSmall:{fontSize:20}}}))(),n=c.a.useState(""),i=Object(v.a)(n,2),r=i[0],s=i[1],l=c.a.useState(""),o=Object(v.a)(l,2),m=(o[0],o[1]),p=a(159),u=c.a.useState(p()),h=Object(v.a)(u,2),d=(h[0],h[1],"");return e.values.name===e.types[1]?c.a.createElement("div",{key:p()},c.a.createElement(I.a,{key:p()},c.a.createElement("input",{accept:"video/*",className:t.input,id:"contained-button-file",multiple:!0,type:"file",name:"inputFile",ref:function(e){return d=e},onChange:function(e){e.preventDefault(),s(d.files[0]),m(d.files[0].name)}})),c.a.createElement("label",{htmlFor:"contained-button-file"},c.a.createElement(O.a,{variant:"contained",component:"span",className:t.button},"Upload",c.a.createElement(P.a,{className:t.rightIcon})),c.a.createElement(O.a,{type:"submit",variant:"outlined",color:"primary",className:t.button,onClick:function(t){t.preventDefault();var n=e.default_check();if(!0===n)if(""!==r){var i=r,s=new FormData;s.append("video",i),function(t){var n=a(47);n.post("/",t).then((function(t){return e.set_im_src()}),n({method:"post",url:"",data:{nn_type:e.nn_type}})).catch((function(e){return console.warn(e)}))}(s),e.set_page_to_1()}else e.seterror_mesage(e.error_mesage_strings[0]);else e.seterror_mesage(n)}},"Go"),c.a.createElement(w.a,{className:t.FormHelperText},e.error_mesage))):null}function N(e){var t=["enet-coco","yolov3/coco","yolov3/drone","yolov3/openimages","yolov3-tiny/coco","yolov3-tiny/drone","yolov3-spp/coco","yolov3-spp/drone/spp1","yolov3-spp/drone/spp3","yolov3-spp-slim/drone/prune_0.5","yolov3-spp-slim/drone/prune_0.5_0.5_0.7","yolov3-spp-slim/drone/prune_0.9","yolov3-spp-slim/drone/prune_0.95","ttfnet/coco/ttfnet_d53_1x","ttfnet/coco/ttfnet_d53_2x","ttfnet/coco/ttfnet_r18_1x","ttfnet/coco/ttfnet_r18_2x","ttfnet/coco/ttfnet_r34_2x"];return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{htmlFor:"type-helper1"},e.namenn),c.a.createElement(k.a,{value:e.nn_type.type,onChange:e.handleChangenns},c.a.createElement(E.a,{value:""},c.a.createElement("em",null,"None")),c.a.createElement(E.a,{value:0},t[0]),c.a.createElement(E.a,{value:1},t[1]),c.a.createElement(E.a,{value:2},t[2]),c.a.createElement(E.a,{value:3},t[3]),c.a.createElement(E.a,{value:4},t[4]),c.a.createElement(E.a,{value:5},t[5]),c.a.createElement(E.a,{value:6},t[6]),c.a.createElement(E.a,{value:7},t[7]),c.a.createElement(E.a,{value:8},t[8]),c.a.createElement(E.a,{value:9},t[9]),c.a.createElement(E.a,{value:10},t[10]),c.a.createElement(E.a,{value:11},t[11]),c.a.createElement(E.a,{value:12},t[12]),c.a.createElement(E.a,{value:13},t[13]),c.a.createElement(E.a,{value:14},t[14]),c.a.createElement(E.a,{value:15},t[15]),c.a.createElement(E.a,{value:16},t[16]),c.a.createElement(E.a,{value:17},t[17])))}function W(e){var t=["Stream","File with record"],a=Object(y.a)((function(e){return{formControl:{display:"flex",margin:"auto",width:"40%",marginTop:"6%"}}}))(),n=c.a.useState({type:"",name:""}),i=Object(v.a)(n,2),r=i[0],s=i[1],l=["Upload file first","Choose detector first","Number of frames must be natural number","Link is incorrect"],o=c.a.useState(""),m=Object(v.a)(o,2),p=m[0],u=m[1],h=["enet-coco","yolov3/coco","yolov3/drone","yolov3/openimages","yolov3-tiny/coco","yolov3-tiny/drone","yolov3-spp/coco","yolov3-spp/drone/spp1","yolov3-spp/drone/spp3","yolov3-spp-slim/drone/prune_0.5","yolov3-spp-slim/drone/prune_0.5_0.5_0.7","yolov3-spp-slim/drone/prune_0.9","yolov3-spp-slim/drone/prune_0.95","ttfnet/coco/ttfnet_d53_1x","ttfnet/coco/ttfnet_d53_2x","ttfnet/coco/ttfnet_r18_1x","ttfnet/coco/ttfnet_r18_2x","ttfnet/coco/ttfnet_r34_2x"],d=c.a.useState({type:"",name:""}),_=Object(v.a)(d,2),g=_[0],f=_[1],O=function(){return""!==g.type?(!0,!0):l[1]};return 0===e.page?c.a.createElement("div",null,c.a.createElement(x.a,{className:a.formControl},c.a.createElement(N,{namenn:"Type of detector",nn_type:g,handleChangenns:function(e){f({type:e.target.value,name:h[e.target.value]}),console.log(g)}})),c.a.createElement(x.a,{className:a.formControl},c.a.createElement(b.a,{htmlFor:"type-helper"},"Type of video"),c.a.createElement(k.a,{value:r.type,onChange:function(e){u(""),s({type:e.target.value,name:t[e.target.value]})},inputProps:{name:"type",id:"type-helper"}},c.a.createElement(E.a,{value:""},c.a.createElement("em",null,"None")),c.a.createElement(E.a,{value:0},t[0]),c.a.createElement(E.a,{value:1},t[1])),c.a.createElement(w.a,null,"Choose type of video")),c.a.createElement(F,{set_im_src:e.set_im_src,set_page_to_1:e.set_page_to_1,width:"40%",values:r,types:t,nn_type:g,default_check:O,marginTop:"4%",seterror_mesage:u,error_mesage:p,error_mesage_strings:l}),c.a.createElement(M,{set_im_src:e.set_im_src,set_page_to_1:e.set_page_to_1,width:"40%",values:r,types:t,nn_type:g,default_check:O,marginTop:"6%",seterror_mesage:u,error_mesage:p,error_mesage_strings:l})):null}var H=a(64),D=a(3),B=a(9),R=a(267),z=a(268),L=a(265),q=a(263),A=a(275),U=a(264),J=a(276),G=a(266),V=a(48),X=a(258),Y=a(274),K=a(218),Q=a(277),Z=a(269),$=a(270),ee=a(113),te=a.n(ee);function ae(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ne=[{id:"x0",numeric:!0,disablePadding:!1,label:"x0"},{id:"y0",numeric:!0,disablePadding:!1,label:"y0"},{id:"x1",numeric:!0,disablePadding:!1,label:"x1"},{id:"y1",numeric:!0,disablePadding:!1,label:"y1"}];function ie(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,i=e.orderBy,r=e.numSelected,s=e.rowCount,l=e.onRequestSort;return c.a.createElement(q.a,null,c.a.createElement(U.a,null,c.a.createElement(L.a,{padding:"checkbox"},c.a.createElement(Y.a,{indeterminate:r>0&&r<s,checked:r===s,onChange:a,inputProps:{"aria-label":"select all desserts"}})),ne.map((function(e){return c.a.createElement(L.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:i===e.id&&n},c.a.createElement(J.a,{active:i===e.id,direction:n,onClick:(a=e.id,function(e){l(e,a)})},e.label,i===e.id?c.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var re=function(e){var t=Object(y.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(B.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}}))(),a=e.numSelected;return c.a.createElement(G.a,{className:Object(D.a)(t.root,Object(H.a)({},t.highlight,a>0))},c.a.createElement("div",{className:t.title},a>0?c.a.createElement(V.a,{color:"inherit",variant:"subtitle1"},a," selected"):c.a.createElement(V.a,{variant:"h6",id:"tableTitle"},"Lines")),c.a.createElement("div",{className:t.spacer}),c.a.createElement("div",{className:t.actions},a>0?c.a.createElement(Q.a,{title:"Delete"},c.a.createElement(K.a,{"aria-label":"delete",onClick:e.del},c.a.createElement(te.a,null))):c.a.createElement("div",null)))};function se(e){var t=Object(y.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},tableWrapper:{overflowX:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}))(),a=c.a.useState("asc"),n=Object(v.a)(a,2),i=n[0],r=n[1],s=c.a.useState("x0"),l=Object(v.a)(s,2),o=l[0],m=l[1],p=c.a.useState([]),u=Object(v.a)(p,2),h=u[0],d=u[1],_=c.a.useState(0),g=Object(v.a)(_,2),f=g[0],b=g[1],E=c.a.useState(!1),w=Object(v.a)(E,2),x=w[0],k=w[1],O=c.a.useState(5),S=Object(v.a)(O,2),j=S[0],C=S[1],F=e.rows,T=j-Math.min(j,F.length-f*j);return c.a.createElement("div",{className:t.root},c.a.createElement(X.a,{className:t.paper},c.a.createElement(re,{numSelected:h.length,del:function(t){e.del_marked(h),d([])}}),c.a.createElement("div",{className:t.tableWrapper},c.a.createElement(R.a,{className:t.table,"aria-labelledby":"tableTitle",size:x?"small":"medium"},c.a.createElement(ie,{classes:t,numSelected:h.length,order:i,orderBy:o,onSelectAllClick:function(t){if(t.target.checked){var a=F.map((function(e){return e.name}));return d(a),void e.load_marked(a)}d([]),e.load_marked([])},onRequestSort:function(e,t){r(o===t&&"desc"===i?"asc":"desc"),m(t)},rowCount:F.length}),c.a.createElement(z.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(F,function(e,t){return"desc"===e?function(e,a){return ae(e,a,t)}:function(e,a){return-ae(e,a,t)}}(i,o)).slice(f*j,f*j+j).map((function(t,a){var n,i=(n=t.name,-1!==h.indexOf(n)),r="enhanced-table-checkbox-".concat(a);return c.a.createElement(U.a,{hover:!0,onClick:function(a){return function(t,a){var n=h.indexOf(a),i=[];-1===n?i=i.concat(h,a):0===n?i=i.concat(h.slice(1)):n===h.length-1?i=i.concat(h.slice(0,-1)):n>0&&(i=i.concat(h.slice(0,n),h.slice(n+1))),d(i),e.load_marked(i)}(0,t.name)},role:"checkbox","aria-checked":i,tabIndex:-1,key:t.name,selected:i},c.a.createElement(L.a,{padding:"checkbox"},c.a.createElement(Y.a,{checked:i,inputProps:{"aria-labelledby":r}})),c.a.createElement(L.a,{align:"right"},t.x0),c.a.createElement(L.a,{align:"right"},t.y0),c.a.createElement(L.a,{align:"right"},t.x1),c.a.createElement(L.a,{align:"right"},t.y1))})),T>0&&c.a.createElement(U.a,{style:{height:49*T}},c.a.createElement(L.a,{colSpan:6}))))),c.a.createElement(A.a,{rowsPerPageOptions:[5,10,25],component:"div",count:F.length,rowsPerPage:j,page:f,backIconButtonProps:{"aria-label":"previous page"},nextIconButtonProps:{"aria-label":"next page"},onChangePage:function(e,t){b(t)},onChangeRowsPerPage:function(e){C(+e.target.value),b(0)}})),c.a.createElement(Z.a,{control:c.a.createElement($.a,{checked:x,onChange:function(e){k(e.target.checked)}}),label:"Dense padding"}))}var le=a(55),oe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).W=a.props.W,a.H=a.props.H,a.k=0,a.line_width=1,a.canvasRef=c.a.createRef(),a.handleClick=a.handleClick.bind(Object(le.a)(a)),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=this.canvasRef.current,a=(t.getContext("2d"),t.getBoundingClientRect()),n=e.clientX-a.left,i=e.clientY-a.top;if(0===this.k)this.props.setPoint(n,i);else{var r=Math.round((n+this.props.point[0])/2),s=Math.round((i+this.props.point[1])/2),l=n-this.props.point[0],o=i-this.props.point[1],c=1,m=1;0!==o?c=-l/o:m=0,n>this.props.point[0]&&c<0&&(c=-c,m=-m),n<this.props.point[0]&&c>0&&(c=-c,m=-m),n===this.props.point[0]&&m<0&&(c=-c,m=-m);var p=Math.sqrt(m*m+c*c);m=Math.round(50*m/p),c=Math.round(50*c/p);var u=Math.round(m+r),h=Math.round(c+s);this.props.setLine(n,i,r,s,u,h)}this.k++,this.k=this.k%2}},{key:"drawline",value:function(e,t){e.beginPath(),e.arc(t.x0,t.y0,this.line_width,0,2*Math.PI,!0),e.arc(t.x1,t.y1,this.line_width,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.lineWidth=2*this.line_width,e.moveTo(t.x0,t.y0),e.lineTo(t.x1,t.y1),e.stroke()}},{key:"drawarrow",value:function(e,t){e.beginPath(),e.arc(t.x0,t.y0,this.line_width,0,2*Math.PI,!0),e.arc(t.x1,t.y1,this.line_width,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.lineWidth=2*this.line_width,e.moveTo(t.x0,t.y0),e.lineTo(t.x1,t.y1),e.stroke();var a=Math.atan2(t.y1-t.y0,t.x1-t.x0),n=10*Math.cos(a)+t.x1,i=10*Math.sin(a)+t.y1;e.moveTo(n,i),a+=1/3*(2*Math.PI),n=10*Math.cos(a)+t.x1,i=10*Math.sin(a)+t.y1,e.lineTo(n,i),a+=1/3*(2*Math.PI),n=10*Math.cos(a)+t.x1,i=10*Math.sin(a)+t.y1,e.lineTo(n,i),e.closePath(),e.fill()}},{key:"drawpoint",value:function(e){e.beginPath(),e.arc(this.props.point[0],this.props.point[1],this.line_width,0,2*Math.PI,!0),e.fill()}},{key:"draw",value:function(){if(null!==this.canvasRef.current){var e=this.canvasRef.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var a=this.props.color_lines;t.fillStyle=a,t.strokeStyle=a;for(var n=0;n<this.props.lines.length;n++)this.drawline(t,this.props.lines[n]),this.drawarrow(t,this.props.perp[n]);null!==this.props.point&&this.drawpoint(t),a=this.props.color_lines_marked,t.fillStyle=a,t.strokeStyle=a;for(var i=0;i<this.props.marked.length;i++)this.drawline(t,this.props.lines[this.props.marked[i]]),this.drawarrow(t,this.props.perp[this.props.marked[i]])}}},{key:"render",value:function(){return this.draw(),c.a.createElement("div",{width:this.W,height:this.H},c.a.createElement("img",{alt:"First frame",src:this.props.im_src,width:this.W,height:this.H,style:{zIndex:1,display:"flex",visibility:"visible",left:0,right:0,margin:"auto",position:"absolute",align:"center"}}),c.a.createElement("canvas",{ref:this.canvasRef,style:{position:"relative",display:"flex",margin:"auto",zIndex:20},width:this.W,height:this.H,onClick:this.handleClick}))}}]),t}(c.a.Component);function ce(e,t,a,n,i){return{name:e,x0:t,y0:a,x1:n,y1:i}}var me=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e))).setPoint=function(e,t){i.setState({point:[e,t]})},i.setLine=function(e,t,a,n,r,s){i.setState({lines:i.state.lines.concat(ce(i.state.line_num,Math.ceil(i.state.point[0]),Math.ceil(i.state.point[1]),Math.ceil(e),Math.ceil(t))),perp:i.state.perp.concat(ce(i.state.line_num,Math.ceil(a),Math.ceil(n),Math.ceil(r),Math.ceil(s))),line_num:i.state.line_num+1,point:null})},i.load_marked=function(e){i.setState({marked:i.state.marked=e.slice()})},i.del_marked=function(e){i.setState({marked:i.state.marked=[]});for(var t=i.state.lines.slice(),a=i.state.perp.slice(),n=0;n<e.length;n++){t.splice(e[n],1),a.splice(e[n],1);for(var r=n+1;r<e.length;r++)e[r]>e[n]&&e[r]--}for(var s=0;s<t.length;s++)t[s].name=s,a[s].name=s;i.setState({lines:i.state.lines=t.slice(),perp:i.state.perp=a.slice(),line_num:t.length})},i.postreq=function(){a(47)({method:"post",url:"",data:{lines:JSON.stringify(i.state.lines)}}).then((function(e){console.log(e)})).catch((function(e){return console.warn(e)}))},i.handleClick=function(e){e.preventDefault(),i.postreq(),i.props.set_num_of_lines(i.state.line_num),i.props.set_streamurl(),i.props.set_page_to_2()},i.run_button="Run",i.W=800,i.H=450,i.state={point:null,line_num:0,lines:[],perp:[],marked:[],stage:0},i}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return 1===this.props.page?c.a.createElement("div",null,c.a.createElement(oe,{color_lines:this.props.color_lines,color_lines_marked:this.props.color_lines_marked,setPoint:this.setPoint,setLine:this.setLine,point:this.state.point,lines:this.state.lines,marked:this.state.marked,im_src:this.props.im_src,perp:this.state.perp,W:this.W,H:this.H}),c.a.createElement(O.a,{variant:"outlined",color:"primary",onClick:this.handleClick,style:{width:"50%",position:"relative",display:"flex",margin:"auto",marginTop:"25px",marginBottom:"25px"}},this.run_button),c.a.createElement(se,{load_marked:this.load_marked,rows:this.state.lines,del_marked:this.del_marked})):null}}]),t}(c.a.Component);function pe(e){return!0===e.show_button?c.a.createElement(O.a,{variant:"outlined",color:"primary",onClick:function(t){!function(){var t=a(47);t({method:"post",url:"/get_stats"}).then((function(a){200===a.status&&(e.set_sim(),t({method:"post",url:"/get_rec_gates"}).then((function(t){200===t.status&&e.set_rec_gates()})).catch((function(e){return console.warn(e)})))})).catch((function(e){return console.warn(e)}))}(),e.set_page_to_3()},style:{width:"50%",position:"relative",display:"flex",margin:"auto",marginTop:"25px",marginBottom:"25px"}},"Show stats"):null}var ue=a(259),he=a(217),de=a(271),_e=a(272),ge=a(114),fe=a.n(ge),ve=a(115),ye=a.n(ve),be=["#FF0000","#00FF00","#0000FF","#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF","#8080FF","#FF8080","#80FF80","#808080"],Ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={open:{}},a.handleClick=function(e){return function(){console.log(e),a.setState(Object(H.a)({},e,!a.state[e]))}},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.lists;t.classes;return c.a.createElement("div",null,c.a.createElement(ue.a,{component:"nav"},a.map((function(t){var a=t.key,n=t.label,i=t.items,r=e.state[a]||!1;return c.a.createElement("div",{key:a},c.a.createElement(he.a,{button:!0,onClick:e.handleClick(a)},c.a.createElement(de.a,{style:{color:be[a%12]},inset:!0,primary:n}),r?c.a.createElement(fe.a,null):c.a.createElement(ye.a,null)),c.a.createElement(_e.a,{in:r,timeout:"auto",unmountOnExit:!0},c.a.createElement(ue.a,{component:"div",disablePadding:!0},i.map((function(e){var t=e.key,a=e.label;return c.a.createElement(he.a,{key:t,button:!0},c.a.createElement(de.a,{inset:!0,primary:a}))})))))}))))}}]),t}(c.a.Component),we=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e))).set_response_data=function(e){i.setState({response_data:i.state.response_data=e})},i.set_lines_data=function(e){i.setState({lines_data:i.state.lines_data=e})},i.set_exit=function(e){i.setState({exit:e})},i.set_show_button=function(){i.setState({show_button:!0})},i.getreq=function(){a(47)({method:"get",url:"/get_current_det"}).then((function(e){200===e.status&&i.set_response_data(e.data)})).catch((function(e){return console.warn(e)}))},i.timer=function(){i.getreq();var e=[];for(var t in i.state.response_data){if("exit"!==t){var a={},n=i.state.response_data[t];for(var r in a.key=t,a.label="Line "+t+":"+n[0],a.items=[],n=n[1]){var s={};s.key=r,s.label=n[r][0]+":"+n[r][1],a.items.push(s)}e.push(a)}"exit"===t&&i.set_exit(i.state.response_data[t])}i.set_lines_data(e),!0===i.state.exit&&(clearInterval(i.state.intervalId),i.set_show_button())},i.timer_time=1e3,i.state={response_data:{},intervalId:null,lines_data:[],exit:!1,show_button:!1},i}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.page!==e.page&&2===this.props.page){var t=setInterval(this.timer,this.timer_time);this.setState({intervalId:t})}}},{key:"render",value:function(){var e=this;if(2===this.props.page){var t=parseInt(.5*this.props.width)+"px",a=parseInt(.5*this.props.height)+"px";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{width:t,height:a,position:"relative",display:"flex",margin:"auto",backgroundColor:"black"}},c.a.createElement("img",{style:{width:t,height:a,zIndex:1,display:"flex",visibility:"visible"},alt:"stream",id:"video",src:this.props.stream_url,onError:function(t){t.target.onerror=null,t.target.src=e.props.Background}})),c.a.createElement(pe,{show_button:this.state.show_button,set_page_to_3:this.props.set_page_to_3,set_sim:this.props.set_sim,set_rec_gates:this.props.set_rec_gates,set_empty_frame:this.props.set_empty_frame}),c.a.createElement(Ee,{lists:this.state.lines_data}))}return null}}]),t}(c.a.Component),xe=a(116),ke=a.n(xe),Oe=a(117),Se=a.n(Oe),je=["Stats vizualization","Clusterized clear ways","Frame without detectable objets"];function Ce(e){if(3===e.page){var t=parseInt(.2*e.width)+"px",a=parseInt(.2*e.height)+"px",n=parseInt(.5*e.width)+"px",i=parseInt(.5*e.height)+"px",r=[{src:e.s_im_0,thumbnail:e.s_im_0,thumbnailWidth:t,thumbnailHeight:a,caption:"All detections"},{src:e.s_im_1,thumbnail:e.s_im_1,thumbnailWidth:t,thumbnailHeight:a,caption:"Trajectories"},{src:e.s_im_2,thumbnail:e.s_im_2,thumbnailWidth:t,thumbnailHeight:a,caption:"Smooth and clear trajectories"},{src:e.s_im_3,thumbnail:e.s_im_3,thumbnailWidth:t,thumbnailHeight:a,caption:"Time(sec) heetmap"},{src:e.s_im_4,thumbnail:e.s_im_4,thumbnailWidth:t,thumbnailHeight:a,caption:"Trajectory length(pixels) heetmap"}];return c.a.createElement(c.a.Fragment,null,c.a.createElement(V.a,{variant:"h2",gutterBottom:!0,align:"center"},je[0]),c.a.createElement("div",{style:{display:"block",minHeight:"1px",width:"100%",overflow:"auto"}},c.a.createElement(ke.a,{enableImageSelection:!1,images:r})),c.a.createElement(V.a,{variant:"h2",gutterBottom:!0,align:"center",style:{display:"block",marginTop:"50px"}},je[1]),c.a.createElement(Se.a,{image:{src:e.rec_gates,alt:je[1],className:"img",style:{display:"flex",margin:"auto",width:n,height:i}},zoomImage:{src:e.rec_gates,alt:je[1]}}))}return null}var Fe=a(26),Te=a.n(Fe),Pe=f.a,Ie=_.a,Me=(Pe[500],Ie[500],Object(u.a)({spacing:4,palette:{type:"light",primary:Pe,secondary:Ie},status:{danger:"orange"}})),Ne=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).set_button_to_stats=function(){a.setState({button_to_stats:!0})},a.set_page_to_1=function(){a.setState({page:1})},a.set_page_to_2=function(){a.setState({page:2})},a.set_page_to_3=function(){a.setState({page:3})},a.set_im_src=function(){a.setState({im_src:"http://127.0.0.1:5000/get_image"})},a.set_streamurl=function(){a.setState({stream_url:"http://127.0.0.1:5000/get_stream"})},a.set_sim=function(){a.setState({s_im_0:"http://127.0.0.1:5000/get_stats0",s_im_1:"http://127.0.0.1:5000/get_stats1",s_im_2:"http://127.0.0.1:5000/get_stats2",s_im_3:"http://127.0.0.1:5000/get_stats3",s_im_4:"http://127.0.0.1:5000/get_stats4"})},a.set_empty_frame=function(){a.setState({empty_frame:"http://127.0.0.1:5000/get_empty"})},a.set_rec_gates=function(){a.setState({rec_gates:"http://127.0.0.1:5000/get_rec"})},a.set_num_of_lines=function(e){a.setState({num_of_lines:e})},a.updateWindowDimensions=function(){a.setState({width:window.innerWidth,height:window.innerHeight})},a.state={width:0,height:0,page:0,im_src:Te.a,stream_url:"",num_of_lines:0,button_to_stats:!0,s_im_0:Te.a,s_im_1:Te.a,s_im_2:Te.a,s_im_3:Te.a,s_im_4:Te.a,empty_frame:Te.a,rec_gates:Te.a},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){return c.a.createElement(h.a,{theme:Me},c.a.createElement("div",null,c.a.createElement(W,{page:this.state.page,set_page_to_1:this.set_page_to_1,set_im_src:this.set_im_src,width:this.state.width,height:this.state.height}),c.a.createElement(me,{page:this.state.page,set_page_to_2:this.set_page_to_2,im_src:this.state.im_src,color_lines:Pe[500],color_lines_marked:Ie[500],set_streamurl:this.set_streamurl,width:this.state.width,height:this.state.height,set_num_of_lines:this.set_num_of_lines}),c.a.createElement(we,{Background:Te.a,page:this.state.page,set_page_to_3:this.set_page_to_3,stream_url:this.state.stream_url,set_sim:this.set_sim,set_rec_gates:this.set_rec_gates,set_empty_frame:this.set_empty_frame,width:this.state.width,height:this.state.height,num_of_lines:this.state.num_of_lines}),c.a.createElement(Ce,{page:this.state.page,s_im_0:this.state.s_im_0,s_im_1:this.state.s_im_1,s_im_2:this.state.s_im_2,s_im_3:this.state.s_im_3,s_im_4:this.state.s_im_4,rec_gates:this.state.rec_gates,empty_frame:this.state.empty_frame,width:this.state.width,height:this.state.height})))}}]),t}(c.a.Component);p.a.render(c.a.createElement(Ne,null),document.getElementById("root"))},26:function(e,t,a){e.exports=a.p+"static/media/default.0c8671a5.png"}},[[133,1,2]]]);
//# sourceMappingURL=main.ae4178ba.chunk.js.map